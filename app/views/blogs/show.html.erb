<div class="py-5 py-20">
  <%= link_to '<i class="bi bi-arrow-return-left"></i> Back'.html_safe, :back, class: "btn btn-info" %>
  <% if user_signed_in? && ( @blog.user == current_user || current_user.admin?) %>
    <div class="text-end">
      <%= link_to '<i class="bi bi-pencil-square"></i> Edit blog'.html_safe, edit_blog_path(@blog), class: "btn btn-outline-primary m-2" %>
      <%= link_to '<i class="bi bi-trash"></i> Delete blog'.html_safe, @blog, data: { "turbo-method": :delete }, class: "btn btn-outline-danger m-2" %>
    </div>
  <% end %>
  <div class="mb-3">
    <h2 class="fw-bolder"><%= @blog.title %></h2>
    <p class="text-muted"><%= @blog.summary %></p>
    <div class="d-flex justify-content-between">
      <div class="d-flex">
        <div class="align-self-center">
          <%= image_tag("user_avatar.png", class: "rounded-circle blog-circle-img") %> 
        </div>
        <div class="ps-2">
          <span class="fw-semibold"><%= @blog.user.name %></span><br/>
          <small class="text-muted">
            <%= get_blog_status(@blog) %> | 
            <%= @blog.read_time %> min read | 
            <%= link_to @blog.category.name, @blog.category, 
            class: "border text-decoration-none rounded-pill px-2 py-1 light-gray text-center" %>
          </small>
        </div>
      </div>
    </div>
    <%= render 'blog_react_btns', blog: @blog %>
    <div class="mt-3">
      <%= image_tag("blog_default_avatar.jpg", class: "max-size-fill-available") %> 
    </div>
    <p class="mt-3"><%= @blog.content.html_safe %></p>
    <div class="d-flex flex-wrap">
      <% @blog.slug.split(',').each do |slug| %>
        <%= link_to slug, slug, class: "text-center border rounded-pill p-2 m-2 light-gray text-decoration-none" %>
      <% end %>
    </div>
  </div>

  <%= display_comments_count(@blog.comments.count) %>
  <%= render 'comments/form', comment: Comment.new, parent: nil %>

  <div id="comments">
    <%= render @blog.parent_comments, blog: @blog %>
  </div>
</div>